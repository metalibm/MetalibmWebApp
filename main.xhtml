<!DOCTYPE html>
<html>
    <head>
    <title> Math function compiler </title>
    <link rel="stylesheet"
          href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/default.min.css"/>
          <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
          <script src="https://unpkg.com/muuri@0.8.0/dist/muuri.min.js"></script>
          <script>
            hljs.initHighlightingOnLoad();
		  </script>
		  <style>
				.board {
				  position: relative;
                  width: 100%;
				  margin-left: 1%;
				}
				.board-column {
				  position: absolute;
				  left: 0;
				  right: 0;
				  width: 90%;
				  margin: 0 1.5%;
				  background: #f0f0f0;
				  border-radius: 3px;
				  z-index: 1;
				}
				.board-column.muuri-item-releasing {
				  z-index: 2;
				}
				.board-column.muuri-item-dragging {
				  z-index: 3;
				  cursor: move;
				}
				.board-column-header {
				  position: relative;
				  height: 35px;
				  line-height: 35px;
				  overflow: hidden;
				  padding: 0 20px;
				  text-align: center;
				  background: #333;
				  color: #fff;
				  border-radius: 3px 3px 0 0;
				}
				@media (max-width: 600px) {
				  .board-column-header {
					text-indent: -1000px;
				  }
				}
				.board-column.todo .board-column-header {
				  background: #4A9FF9;
				}
				.board-column.working .board-column-header {
				  background: #f9944a;
				}
				.board-column.done .board-column-header {
				  background: #2ac06d;
				}
				.board-column-content {
				  position: relative;
				  border: 10px solid transparent;
				  min-height: 95px;
				}
				.board-item {
				  position: absolute;
				  width: 100%;
				  margin: 5px 0;
				}
				.board-item.muuri-item-releasing {
				  z-index: 9998;
				}
				.board-item.muuri-item-dragging {
				  z-index: 9999;
				  cursor: move;
				}
				.board-item.muuri-item-hidden {
				  z-index: 0;
				}
				.board-item-content {
				  position: relative;
				  padding: 10px;
				  background: #fff;
				  border-radius: 4px;
				  font-size: 17px;
				  cursor: pointer;
				  -webkit-box-shadow: 0px 1px 3px 0 rgba(0,0,0,0.2);
				  box-shadow: 0px 1px 3px 0 rgba(0,0,0,0.2);
				}
				@media (max-width: 600px) {
				  .board-item-content {
					text-align: center;
				  }
				  .board-item-content span {
					display: none;
				  }
				}

                .option_select {
                    width: 250px;
                }
                .option_label {
                    font-weight: bold;
                }
                .option_label_cell {
                    text-align: right;
                }

		  </style>
    </head>
	<body>
        <center>
		<table>
          <tr>
                <td colspan="2">
                    <h1> Math function compiler </h1>
                    <h2> (version ${version_info})</h2>
                    <p>
                        Math function compiler generates source code from a function expression.
                        This web application is based on the tools <b>metalibm-lugdunum</b>, available on <a href="https://github.com/kalray/metalibm"> Kalray's github page </a>
                    </p>
                    <p> <b>Metalibm-lugdunum</b> is a code generator for elementary functions. It is part of a larger project <a href="http://metalibm.org"> metalibm.org</a>.
                    </p>
                    <p>
                        You can report issue with the web application <a href="https://github.com/metalibm/MetalibmWepApp/issues/new">there</a> and with metalibm <a href="https://github.com/kalray/metalibm/issues/new"> here </a>.
                    </p>
                </td>
          </tr>
          <tr>
              <td>
                  <b>Generation options:</b><br/>
              </td>
              <td>
                  <b>Code result:</b>
                <py:if test="not total_time is None">
                    <i> (generated in ${"{:.3f}".format(total_time)} second(s) </i>
                </py:if>
                  <br/>
              </td>
          </tr>
		  <tr>
		  <td width="500px" valign="top">
			<form action="function" method="get" >
                <table>
                    <tr>
                        <td width="150px" class="option_label_cell">
                            <label class="option_label">Function expression:</label>
                        </td>
                        <td width="350px">
                            <input name="fct_expr" id="fct_expr" value="${fct_expr}" style="text-align: right;" />
                        </td>
                    </tr>
                    <tr>
                        <td class="option_label_cell">
                            <label class="option_label">Input Range:</label>
                        </td>
                        <td>
                            <input id="range_lo" size="5" name="range_lo" value="${range_lo}"></input>
                            <input id="range_hi" size="5" name="range_hi" value="${range_hi}"></input>
                        </td>
                    </tr>
                    <tr>
                        <td class="option_label_cell">
                            <label class="option_label">Accuracy target <br/>(in bits):</label>
                        </td>
                        <td>
                            <input id="accuracy_target_bits" size="5" name="accuracy_target_bits" value="${accuracy_target_bits}"></input>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <br/>
                            <div style="text-align:center;">
                                    <input type="submit" value="Generate!"/>
                                    <input type="button" value="Clear!"  onclick="window.location.href = '${localhost}';"/>
                            </div>
                        </td>
                        <td>
                        </td>
                    </tr>
          <tr>
          </tr>
                </table>
			</form>
		  </td>
            <py:if test="error is None">
              <td width="500px">
                <pre>
                    <code class="C" style="overflow-y: scroll;height:500px; width: 500px; overflow-x: scroll;" id="rawSourceCode">
${code}
                    </code>
                </pre>

                    <!-- The button used to copy the text -->
					<input type="hidden" id="sourceCode" value="${code}"/>
                    <center>
                        <button onclick="copyCodeToClipboard()">Copy source code to clipboard</button>
                    </center>
              </td>
            </py:if><py:else>
                <td>
                    <div>
                        Error encountered:
                        <p py:content="literal(error)"></p>
                    </div>
                    <a href="${report_issue_url}"> Click here to report an issue </a>
                </td>

            </py:else>
		</tr>
		<tr>
			<td colspan="2" width="1000px">
                <b><u>Help:</u></b>

                    <b><u>Some examples:</u></b>
                    <ul>
                        <py:for each="example_tag in example_map">
                                <li><a href="${example_map[example_tag]}">${example_tag}</a></li>
                        </py:for>
                    </ul>
			</td>
		</tr>
		<tr>
			<td colspan="2" width="1000px">
                <b><u>Changelog:</u></b>
                    <ul>
                        <li></li>
                    </ul>
			</td>
		</tr>
		<tr>
			<td colspan="2">
                <p> <i> This page is propulsed by <a href="https://turbogears.org/">TurboGears</a> and uses <a href="https://github.com/nandoflorestan/kajiki">kajiki</a> template, <a href="https://haltu.github.io/muuri/">muuri</a> and <a href="https://highlightjs.org/">highlightjs </a> </i></p> 
			</td>
		</tr>
	  </table>
      </center>
	</body>
          <script src="${localhost}/mwa.js"></script>
</html>
